{"version":3,"file":"ol-elevation-parser.min.js","sources":["../node_modules/array-smooth/lib/index.js","../src/helpers.ts","../src/logger.ts","../src/defaults.ts","../src/readFromImage.ts","../src/ol-elevation-parser.ts"],"sourcesContent":["function smooth(arr, windowSize, getter = (value) => value, setter) {\n  const get = getter\n  const result = []\n\n  for (let i = 0; i < arr.length; i += 1) {\n    const leftOffeset = i - windowSize\n    const from = leftOffeset >= 0 ? leftOffeset : 0\n    const to = i + windowSize + 1\n\n    let count = 0\n    let sum = 0\n    for (let j = from; j < to && j < arr.length; j += 1) {\n      sum += get(arr[j])\n      count += 1\n    }\n\n    result[i] = setter ? setter(arr[i], sum / count) : sum / count\n  }\n\n  return result\n}\n\nmodule.exports = smooth\n",null,null,null,null,null],"names":["arr","windowSize","getter","value","setter","get","result","i","length","leftOffeset","to","count","sum","j","geojson","GeoJSON","deepObjectAssign","target","sources","forEach","source","Object","keys","key","s_val","loggerIsEnabled","options","ReadFromImage","constructor","calculateZMethod","bands","map","this","_projection","getProjection","getView","_view","_calculateZMethod","_canvas","createElement","_ctx","getContext","clearRect","width","height","tileGrid","_getTileGrid","tileSize","getTileSize","zoom","tile","_source","getTile","tileCoord","getState","r","g","b","bool","_rasterSourceIsLoaded","_initialized","_getZFromSampledCoords","async","coords","optOptions","_countConnections","countErrorsLimit","resolutionNumber","_resolution","tilesResolution","getTilesResolution","console","warn","maxRes","getMaxTilesResolution","coord","countConnections","logger","zValue","TileWMS","_getZValuesFromWMS","getMap","_getZValuesFromImage","zValueRound","Number","toFixed","err","errorCount","_options","defaultOptions","verbose","waitUntilRasterSourceIsLoaded","Promise","resolve","reject","isSourceReady","retryNum","maxRetries","waitMilliseconds","contourCoords","mainCoords","sampledCoords","customOptions","getSmoothedCoords","smooth","assign","gridPolygons","dispatchEvent","setSource","silent","set","getSamples","getSampleSizeArea","setSampleSizeArea","sampleSizeArea","getCalculateZMethod","getSmooth","setSmooth","setNoDataValue","noDataValue","setTilesResolution","getBands","setBands","getTimeout","_init","setSamples","samples","_addPropertyEvents","_onInitModifySource","getSource","Function","_readFromImage"],"mappings":"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","x_google_ignoreList":[0]}