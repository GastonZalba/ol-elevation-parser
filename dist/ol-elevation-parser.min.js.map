{"version":3,"file":"ol-elevation-parser.min.js","sources":["../node_modules/array-smooth/lib/index.js","../src/helpers.ts","../src/logger.ts","../src/defaults.ts","../src/readFromImage.ts","../src/ol-elevation-parser.ts"],"sourcesContent":["function smooth(arr, windowSize, getter = (value) => value, setter) {\n  const get = getter\n  const result = []\n\n  for (let i = 0; i < arr.length; i += 1) {\n    const leftOffeset = i - windowSize\n    const from = leftOffeset >= 0 ? leftOffeset : 0\n    const to = i + windowSize + 1\n\n    let count = 0\n    let sum = 0\n    for (let j = from; j < to && j < arr.length; j += 1) {\n      sum += get(arr[j])\n      count += 1\n    }\n\n    result[i] = setter ? setter(arr[i], sum / count) : sum / count\n  }\n\n  return result\n}\n\nmodule.exports = smooth\n",null,null,null,null,null],"names":["arr","windowSize","getter","value","setter","get","result","i","length","leftOffeset","to","count","sum","j","geojson","GeoJSON","deepObjectAssign","target","sources","forEach","source","Object","keys","key","s_val","loggerIsEnabled","options","ReadFromImage","constructor","calculateZMethod","bands","map","this","_projection","getProjection","getView","_view","_calculateZMethod","_canvas","createElement","_ctx","getContext","clearRect","width","height","tileGrid","_getTileGrid","tileSize","getTileSize","zoom","tile","_source","getTile","tileCoord","getState","r","g","b","bool","_rasterSourceIsLoaded","_initialized","_getZFromSampledCoords","async","coords","optOptions","_countConnections","countErrorsLimit","resolutionNumber","_resolution","tilesResolution","getTilesResolution","console","warn","maxRes","getMaxTilesResolution","coord","countConnections","logger","zValue","TileWMS","_getZValuesFromWMS","getMap","_getZValuesFromImage","zValueRound","coordsWithZ","push","err","errorCount","_options","defaultOptions","waitUntilRasterSourceIsLoaded","Promise","resolve","reject","isSourceReady","retryNum","maxRetries","waitMilliseconds","sampledCoords","gridPolygons","_sampleFeatureCoords","feature","customOptions","contourCoords","mainCoords","smooth","dispatchEvent","setSource","silent","set","samples","getSampleSizeArea","getCalculateZMethod","setCalculateZMethod","getSmooth","getNoDataValue","setNoDataValue","noDataValue","setTilesResolution","setBands","getTimeout","_init","setSamples","setTimeout","timeout","on","_onInitModifySource","Function","_readFromImage"],"mappings":"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","x_google_ignoreList":[0]}